<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Origins of Late</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            background: #0a0a0a;
            overflow: hidden;
            font-family: monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #canvas {
            line-height: 0.9;
            letter-spacing: 0.08em;
            font-size: 14px;
            color: #00ff88;
            user-select: none;
            white-space: pre;
        }

        .container {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="canvas"></div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        let width = 80;
        let height = 50;
        let grid = [];
        let time = 0;
        const textString = "originsoflate";
        let textPositions = [];

        function initGrid() {
            grid = [];
            for (let y = 0; y < height; y++) {
                let row = [];
                for (let x = 0; x < width; x++) {
                    row.push(' ');
                }
                grid.push(row);
            }
        }

        function render() {
            let html = '';
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    html += grid[y][x];
                }
                html += '\n';
            }
            canvas.textContent = html;
        }

        function isInFace(x, y) {
            const cx = width / 2;
            const cy = height / 2;
            const dx = x - cx;
            const dy = y - cy;
            
            // Upper head - narrower at top
            const upperHeadWidth = 20;
            const upperHeadHeight = 15;
            
            // Lower jaw - wider and more pronounced with rounded cheeks
            const lowerJawWidth = 26;
            const lowerJawHeight = 18;
            
            // Split face into upper and lower regions
            if (dy < 0) {
                // Upper head region (narrower)
                const upperDist = (dx * dx) / (upperHeadWidth * upperHeadWidth) + (dy * dy) / (upperHeadHeight * upperHeadHeight);
                
                if (dy < -8 && Math.abs(dx) < 20) {
                    const foreheadDist = (dx * dx) / (20 * 20) + ((dy + 8) * (dy + 8)) / (8 * 8);
                    if (foreheadDist < 1.2) {
                        const isEdge = foreheadDist > 0.85 && foreheadDist < 1.2;
                        return { inFace: true, depth: 1.5 - foreheadDist, isEdge, hairZone: 0 };
                    }
                }
                
                if (upperDist < 1) {
                    const isEdge = upperDist > 0.75 && upperDist < 1;
                    return { inFace: true, depth: 1 - upperDist, isEdge, hairZone: 0 };
                }
            } else {
                // Lower jaw region with rounded cheeks - smoother transitions
                // Add cheek rounding by using a more complex distance calculation
                const cheekRounding = Math.pow(Math.abs(dx) / lowerJawWidth, 3.0);
                const jawRounding = Math.pow(Math.abs(dy) / lowerJawHeight, 2.2);
                const lowerDist = cheekRounding + jawRounding;
                
                if (lowerDist < 1) {
                    const isEdge = lowerDist > 0.65 && lowerDist < 1;
                    return { inFace: true, depth: 1 - lowerDist, isEdge, hairZone: 0 };
                }
            }
            
            // Hair zones - calculate from both upper and lower
            const upperDist = (dx * dx) / (upperHeadWidth * upperHeadWidth) + (dy * dy) / (upperHeadHeight * upperHeadHeight);
            const cheekRounding = Math.pow(Math.abs(dx) / lowerJawWidth, 3.0);
            const jawRounding = Math.pow(Math.abs(dy) / lowerJawHeight, 2.2);
            const lowerDist = cheekRounding + jawRounding;
            const minDist = Math.min(upperDist, lowerDist);
            
            if (minDist >= 1 && minDist < 1.15) {
                return { inFace: false, depth: 0, isEdge: true, hairZone: 1 };
            }
            if (minDist >= 1.15 && minDist < 1.35) {
                return { inFace: false, depth: 0, isEdge: false, hairZone: 2 };
            }
            if (minDist >= 1.35 && minDist < 1.6) {
                return { inFace: false, depth: 0, isEdge: false, hairZone: 3 };
            }
            if (minDist >= 1.6 && minDist < 1.9) {
                return { inFace: false, depth: 0, isEdge: false, hairZone: 4 };
            }
            
            return { inFace: false, depth: 0, isEdge: false, hairZone: 0 };
        }

        function isInEyes(x, y) {
            const cy = height / 2 - 3;
            const leftEyeX = width / 2 - 9;
            const rightEyeX = width / 2 + 9;
            const eyeRadius = 3;
            const pupilRadius = 1.8;
            const socketRadius = 5;
            
            const leftDist = Math.sqrt((x - leftEyeX) ** 2 + (y - cy) ** 2);
            const rightDist = Math.sqrt((x - rightEyeX) ** 2 + (y - cy) ** 2);
            
            if (leftDist < socketRadius || rightDist < socketRadius) {
                if (leftDist < pupilRadius || rightDist < pupilRadius) {
                    return { inEyes: true, isPupil: true, isDeepSocket: false };
                }
                if (leftDist < eyeRadius || rightDist < eyeRadius) {
                    return { inEyes: true, isPupil: false, isDeepSocket: false };
                }
                return { inEyes: true, isPupil: false, isDeepSocket: true };
            }
            
            return { inEyes: false, isPupil: false, isDeepSocket: false };
        }

        function isInBrow(x, y) {
            const cy = height / 2 - 6;
            const browHeight = 3;
            const browWidth = 22;
            const cx = width / 2;
            
            const dy = Math.abs(y - cy);
            const dx = Math.abs(x - cx);
            
            if (dy < browHeight && dx < browWidth) {
                const intensity = 1 - (dy / browHeight) * (dx / browWidth);
                return { inBrow: true, intensity };
            }
            
            return { inBrow: false, intensity: 0 };
        }

        function isInNose(x, y) {
            const cx = width / 2;
            const cy = height / 2 + 4;
            const noseWidth = 8;
            const noseHeight = 6;
            
            if (Math.abs(x - cx) < 3 && y > cy - 6 && y < cy) {
                return { inNose: true, isNostril: false, isBridge: true };
            }
            
            if (Math.abs(x - cx) < noseWidth && Math.abs(y - cy) < noseHeight) {
                const leftNostrilX = cx - 4;
                const rightNostrilX = cx + 4;
                const nostrilY = cy + 1;
                const nostrilRadius = 2;
                
                const leftNostrilDist = Math.sqrt((x - leftNostrilX) ** 2 + (y - nostrilY) ** 2);
                const rightNostrilDist = Math.sqrt((x - rightNostrilX) ** 2 + (y - nostrilY) ** 2);
                
                if (leftNostrilDist < nostrilRadius || rightNostrilDist < nostrilRadius) {
                    return { inNose: true, isNostril: true, isBridge: false };
                }
                
                return { inNose: true, isNostril: false, isBridge: false };
            }
            
            return { inNose: false, isNostril: false, isBridge: false };
        }

        function isInMouth(x, y) {
            const cx = width / 2;
            const cy = height / 2 + 12;
            const mouthWidth = 11;
            const lipHeight = 2;
            
            const dx = x - cx;
            const dy = y - cy;
            
            if (Math.abs(dx) < mouthWidth && Math.abs(dy) < lipHeight) {
                return { inMouth: true, isLip: Math.abs(dy) < 1 };
            }
            
            return { inMouth: false, isLip: false };
        }

        function isInMuzzle(x, y) {
            const cx = width / 2;
            const cy = height / 2 + 9;
            const muzzleWidth = 16;
            const muzzleHeight = 10;
            
            const dx = (x - cx) / muzzleWidth;
            const dy = (y - cy) / muzzleHeight;
            const dist = dx * dx + dy * dy;
            
            if (dist < 1) {
                return { inMuzzle: true, depth: 1 - dist };
            }
            
            return { inMuzzle: false, depth: 0 };
        }

        function update() {
            initGrid();
            
            const t = time * 0.03;
            
            if (Math.random() < 0.005 && textPositions.length === 0) {
                const mouthY = Math.floor(height / 2 + 12);
                // Find leftmost face boundary at mouth height
                let startX = width / 2;
                for (let checkX = 0; checkX < width; checkX++) {
                    const checkFace = isInFace(checkX, mouthY);
                    if (checkFace.inFace) {
                        startX = checkX;
                        break;
                    }
                }
                textPositions.push({
                    x: startX,
                    y: mouthY,
                    life: 150
                });
            }
            
            textPositions = textPositions.filter(pos => {
                pos.x += 0.1;
                pos.life--;
                return pos.life > 0;
            });
            
            for (let y = 0; y < height; y++) {
                for (let x = 0; x < width; x++) {
                    const wave = Math.sin(x * 0.15 + y * 0.12 + t);
                    const noise = Math.sin(x * 0.3 + t * 0.7) * Math.cos(y * 0.25 + t * 0.5);
                    const faceInfo = isInFace(x, y);
                    
                    const browInfo = isInBrow(x, y);
                    if (browInfo.inBrow) {
                        grid[y][x] = browInfo.intensity > 0.5 ? '8' : '1';
                    }
                    else {
                        const eyeInfo = isInEyes(x, y);
                        if (eyeInfo.inEyes) {
                            if (eyeInfo.isPupil) {
                                grid[y][x] = '8';
                            } else if (eyeInfo.isDeepSocket) {
                                grid[y][x] = '8';
                            } else {
                                grid[y][x] = '1';
                            }
                        }
                        else {
                            const noseInfo = isInNose(x, y);
                            if (noseInfo.inNose) {
                                if (noseInfo.isNostril) {
                                    grid[y][x] = '8';
                                } else if (noseInfo.isBridge) {
                                    grid[y][x] = '1';
                                } else {
                                    grid[y][x] = wave > 0 ? '1' : '8';
                                }
                            }
                            else {
                                const mouthInfo = isInMouth(x, y);
                                if (mouthInfo.inMouth) {
                                    grid[y][x] = mouthInfo.isLip ? '8' : '1';
                                }
                                else {
                                    const muzzleInfo = isInMuzzle(x, y);
                                    if (muzzleInfo.inMuzzle) {
                                        const muzzlePattern = wave * 0.4 + noise * 0.6 + muzzleInfo.depth;
                                        if (muzzlePattern > 0.5) {
                                            grid[y][x] = '1';
                                        } else {
                                            grid[y][x] = '8';
                                        }
                                    }
                                    else if (faceInfo.inFace) {
                                        const combined = wave + noise + faceInfo.depth * 0.7;
                                        if (combined > 0.5) {
                                            grid[y][x] = '1';
                                        } else {
                                            grid[y][x] = '8';
                                        }
                                    }
                                    else if (faceInfo.isEdge) {
                                        const dotPattern = Math.sin(x * 0.8 + y * 0.6 + t * 0.3);
                                        if (dotPattern > 0.1) {
                                            grid[y][x] = '.';
                                        }
                                    }
                                    else if (faceInfo.hairZone > 0) {
                                        const hairDensity = 1 - (faceInfo.hairZone * 0.15);
                                        const hairPattern = Math.sin(x * 0.9 + y * 0.7 + t * 0.2) * Math.cos(x * 0.5 + y * 0.4);
                                        if (hairPattern > (0.2 - hairDensity)) {
                                            grid[y][x] = '.';
                                        }
                                    }
                                    else {
                                        const bgPattern = Math.sin(x * 0.1 + t * 0.3) * Math.cos(y * 0.08 + t * 0.2);
                                        if (bgPattern > 0.95) {
                                            grid[y][x] = '.';
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            
            textPositions.forEach(pos => {
                for (let i = 0; i < textString.length; i++) {
                    const tx = Math.floor(pos.x) + i;
                    if (tx >= 0 && tx < width && pos.y >= 0 && pos.y < height) {
                        // Draw text across entire face horizontally at mouth level
                        const checkFace = isInFace(tx, pos.y);
                        if (checkFace.inFace) {
                            grid[pos.y][tx] = textString[i];
                        }
                    }
                }
            });
            
            time++;
        }

        function animate() {
            update();
            render();
            requestAnimationFrame(animate);
        }

        initGrid();
        animate();
    </script>
</body>
</html>